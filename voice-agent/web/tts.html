<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTS Playground â€” Chatterbox Turbo</title>
    <meta name="description" content="Test Chatterbox TTS with a chat-style interface">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="tts.css">
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                    </svg>
                </div>
                <div>
                    <h1>TTS Playground</h1>
                    <a href="index.html" class="nav-back">&larr; Voice Agent</a>
                </div>
            </div>
            <div class="status-badge" id="serverStatus">
                <span class="status-dot"></span>
                <span class="status-text">Checking...</span>
            </div>
        </header>

        <main class="main">
            <!-- Settings Panel (collapsible) -->
            <details class="settings-panel" id="settingsPanel">
                <summary class="settings-toggle">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                    <span>Settings</span>
                </summary>
                <div class="settings-grid">
                    <div class="form-group">
                        <label for="voiceSelect">Voice</label>
                        <input type="text" id="voiceSelect" value="default" placeholder="Voice name">
                    </div>
                    <div class="form-group">
                        <label for="formatSelect">Format</label>
                        <select id="formatSelect">
                            <option value="wav" selected>WAV</option>
                            <option value="mp3">MP3</option>
                            <option value="opus">Opus</option>
                            <option value="flac">FLAC</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="exaggerationSlider">
                            Exaggeration <span class="slider-value" id="exaggerationValue">0.5</span>
                        </label>
                        <input type="range" id="exaggerationSlider" min="0" max="1" step="0.05" value="0.5">
                    </div>
                    <div class="form-group">
                        <label for="cfgWeightSlider">
                            CFG Weight <span class="slider-value" id="cfgWeightValue">0.5</span>
                        </label>
                        <input type="range" id="cfgWeightSlider" min="0" max="1" step="0.05" value="0.5">
                    </div>
                    <div class="form-group">
                        <label for="temperatureSlider">
                            Temperature <span class="slider-value" id="temperatureValue">0.8</span>
                        </label>
                        <input type="range" id="temperatureSlider" min="0.1" max="1.5" step="0.05" value="0.8">
                    </div>
                    <div class="form-group form-group-btn">
                        <button class="btn btn-small btn-secondary" id="resetSettingsBtn" type="button">Reset Defaults</button>
                    </div>

                    <!-- Voice Clone -->
                    <div class="clone-section">
                        <div class="clone-header">
                            <label for="cloneToggle">Voice Clone</label>
                            <label class="toggle" aria-label="Toggle voice cloning">
                                <input type="checkbox" id="cloneToggle">
                                <span class="toggle-track"></span>
                            </label>
                        </div>
                        <div class="clone-body hidden" id="cloneBody">
                            <div class="clone-dropzone" id="cloneDropzone">
                                <input type="file" id="cloneFileInput"
                                       accept="audio/wav,audio/mpeg,audio/mp4,audio/x-m4a,audio/flac,.wav,.mp3,.m4a,.flac"
                                       class="sr-only">
                                <label for="cloneFileInput" class="clone-dropzone-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="17 8 12 3 7 8"/>
                                        <line x1="12" y1="3" x2="12" y2="15"/>
                                    </svg>
                                    <span>Upload reference audio</span>
                                    <span class="clone-hint">WAV, MP3, M4A, or FLAC &middot; max 10 MB</span>
                                </label>
                            </div>
                            <div class="clone-file-info hidden" id="cloneFileInfo">
                                <div class="clone-file-meta">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                                        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                                    </svg>
                                    <span class="clone-filename" id="cloneFilename"></span>
                                    <span class="clone-duration" id="cloneDuration"></span>
                                </div>
                                <button class="btn btn-text clone-remove-btn" id="cloneRemoveBtn" type="button">Remove</button>
                            </div>
                            <div class="clone-error hidden" id="cloneError"></div>
                        </div>
                    </div>
                </div>
            </details>

            <!-- Chat Area -->
            <div class="chat-area" id="chatArea">
                <div class="chat-placeholder" id="chatPlaceholder">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                    </svg>
                    <p>Type a message to hear it spoken</p>
                    <p class="hint">Ctrl+Enter to send</p>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <!-- Gesture Tag Chips -->
                <div class="gesture-bar" id="gestureBar" role="toolbar" aria-label="Insert expression tag">
                    <span class="gesture-label">Tags</span>
                    <button class="gesture-chip" data-tag="[laugh]" type="button">[laugh]</button>
                    <button class="gesture-chip" data-tag="[chuckle]" type="button">[chuckle]</button>
                    <button class="gesture-chip" data-tag="[sigh]" type="button">[sigh]</button>
                    <button class="gesture-chip" data-tag="[cough]" type="button">[cough]</button>
                    <button class="gesture-chip" data-tag="[gasp]" type="button">[gasp]</button>
                    <button class="gesture-chip" data-tag="[groan]" type="button">[groan]</button>
                    <button class="gesture-chip" data-tag="[sniff]" type="button">[sniff]</button>
                </div>
                <div class="input-row">
                    <label for="messageInput" class="sr-only">Message to speak</label>
                    <textarea
                        id="messageInput"
                        placeholder="Type something to speak..."
                        rows="2"
                        autofocus
                    ></textarea>
                    <div class="input-actions">
                        <button class="btn btn-send" id="sendBtn" type="button" aria-label="Generate speech">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"/>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                            </svg>
                        </button>
                        <button class="btn btn-cancel hidden" id="cancelBtn" type="button" aria-label="Cancel generation">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="15" y1="9" x2="9" y2="15"/>
                                <line x1="9" y1="9" x2="15" y2="15"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="input-hint">
                    <kbd>Ctrl</kbd>+<kbd>Enter</kbd> to send
                    <button class="btn btn-text" id="clearChatBtn" type="button">Clear chat</button>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>Powered by Chatterbox Turbo (Resemble AI)</p>
        </footer>
    </div>

    <script src="tts.js"></script>
</body>
</html>
